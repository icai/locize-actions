!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).locizeLastUsed=e()}(this,(function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function n(n){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach((function(e){t(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}var i={init:function(t){this.options=n({},{actionPath:"https://api.locize.app/{{action}}/{{projectId}}/{{version}}/{{lng}}/{{ns}}",referenceLng:"en",crossDomain:!0,setContentTypeJSON:!1,version:"latest",debounceSubmit:9e4,allowedHosts:["localhost"]},{},this.options,{},t);var e,i,o,r,s=window.location&&window.location.hostname;this.isAllowed=!s||this.options.allowedHosts.indexOf(s)>-1,this.submitting=null,this.pending={},this.done={},this.submit=(e=this.submit,i=this.options.debounceSubmit,function(){var t=this,n=arguments,s=function(){r=null,o||e.apply(t,n)},c=o&&!r;clearTimeout(r),r=setTimeout(s,i),c&&e.apply(t,n)})},actions:function(t,e,n,i,o){var r=this;"function"==typeof i&&(o=i,i=!0),["pending","done"].forEach((function(t){r.done[e]&&r.done[e][n]||(r[t][e]||(r[t][e]={}),r[t][e][n]=i||!0)})),this.submit(t,o)},submit:function(t,e){var i=this;if(this.isAllowed){if(this.submitting)return this.submit(t,e);e=e||function(e){return"used"===t?Object.keys(e):e};var o,r=(o=this.options,["projectId","version","apiKey","referenceLng"].reduce((function(t,e){if(t)return t;if(!o||!o[e]||"string"!=typeof o[e]||!o[e].toLowerCase()===e.toLowerCase()){var n='i18next-lastused :: got "'.concat(o[e],'" in options for ').concat(e," which is invalid.");return console.warn(n),n}return!1}),!1));if(r)return callback(new Error(r));this.submitting=this.pending,this.pending={};var s=Object.keys(this.submitting),c=s.length,a=function(){--c||(i.submitting=null)};s.forEach((function(o){var r,s,c,u,p=e(i.submitting[o]),f=(r=i.options.actionPath,s=["projectId","version","lng","ns","action"],c=n({},i.options,{lng:i.options.referenceLng,ns:o,action:t}),u=r,s.forEach((function(t){var e=new RegExp("{{".concat(t,"}}"),"g");u=u.replace(e,c[t])})),u);!function(t){return Array.isArray(t)&&0==t.length||0==Object.keys(t).length}(p)?function(t,e,n,i,o){try{var r=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");r.open(i?"POST":"GET",t,1),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.authorize&&e.apiKey&&r.setRequestHeader("Authorization",e.apiKey),(i||e.setContentTypeJSON)&&r.setRequestHeader("Content-type","application/json"),r.onreadystatechange=function(){r.readyState>3&&n&&n(r.responseText,r)},r.send(JSON.stringify(i))}catch(t){window.console&&window.console.log(t)}}(f,n({},{authorize:!0},{},i.options),(function(t,e){a()}),p):a()}))}},type:"3rdParty"};return i}));
